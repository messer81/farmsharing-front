# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–±–ª–µ–º

### üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã:

1. **"Maximum update depth exceeded"** - –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã
2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–µ–ª–∞–ª–∏ –∑–∞–ø—Ä–æ—Å—ã –ø–æ 2-3 —Ä–∞–∑–∞
3. **–ù–∞—Ä—É—à–µ–Ω–∏–µ Rules of Hooks** - –≤—ã–∑–æ–≤—ã —Ö—É–∫–æ–≤ –≤–Ω—É—Ç—Ä–∏ `useMemo`
4. **–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** –≤ `useEffect` –∏ `useCallback`
5. **–û—à–∏–±–∫–∏ —Ç–∏–ø–∞** - `Rating` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ª—É—á–∞–ª —Å—Ç—Ä–æ–∫—É –≤–º–µ—Å—Ç–æ —á–∏—Å–ª–∞

## üéØ –†–µ—à–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤

#### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
// –ü–õ–û–•–û - apiCall –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
const execute = useCallback(async () => {
  // ... –ª–æ–≥–∏–∫–∞
}, [apiCall, options.onSuccess, options.onError]); // ‚ùå apiCall –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
```

#### ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –•–û–†–û–®–û - —É–±—Ä–∞–ª apiCall –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
const execute = useCallback(async () => {
  // ... –ª–æ–≥–∏–∫–∞
}, [options.onSuccess, options.onError, options.cacheKey]); // ‚úÖ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ö—É–∫–æ–≤

#### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
// –ü–õ–û–•–û - —Ö—É–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ
export function useProducts() {
  return {
    getPaginated: (page: number, limit: number) => 
      useApi(() => getPaginated(page, limit)), // ‚ùå –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–∞–∂–¥—ã–π —Ä–∞–∑
  };
}
```

#### ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –•–û–†–û–®–û - —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ö—É–∫–∏ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ –∫—ç—à–∞
export function useProductsPaginated(page: number, limit: number) {
  return useApi(() => apiClient.products.getPaginated(page, limit), { 
    cacheKey: `products_paginated_${page}_${limit}` 
  });
}

export function useProductsAll() {
  return useApi(() => apiClient.products.getAll(), { 
    cacheKey: 'products_all' 
  });
}
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Rules of Hooks

#### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
// –ü–õ–û–•–û - –≤—ã–∑–æ–≤ —Ö—É–∫–∞ –≤–Ω—É—Ç—Ä–∏ useMemo
const productsApi = useMemo(() => useProducts(), []); // ‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
```

#### ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –•–û–†–û–®–û - –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Ö—É–∫–∞
const productsApi = useProducts(); // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
```

### 4. –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

#### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
// –ü–õ–û–•–û - —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
const handleSearch = async () => {
  // ... –ª–æ–≥–∏–∫–∞
};
```

#### ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –•–û–†–û–®–û - –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
const handleSearch = useCallback(async () => {
  // ... –ª–æ–≥–∏–∫–∞
}, [searchQuery, fetchProducts, searchProducts]); // ‚úÖ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### 5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π useEffect

#### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
// –ü–õ–û–•–û - –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
useEffect(() => {
  loadProducts();
}, [loadProducts]); // ‚ùå loadProducts –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è
```

#### ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –•–û–†–û–®–û - —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
useEffect(() => {
  if (!initialProducts) {
    fetchProducts();
  }
}, [initialProducts, fetchProducts]); // ‚úÖ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ FeaturedProducts

#### **–î–æ:**
```typescript
export const FeaturedProducts = () => {
  const productsApi = useProducts();
  const { data, loading, error, execute } = productsApi.getPaginated(1, 6);
  
  useEffect(() => {
    execute();
  }, [execute]); // ‚ùå execute –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è
};
```

#### **–ü–æ—Å–ª–µ:**
```typescript
export const FeaturedProducts = () => {
  const { data, loading, error, execute } = useProductsPaginated(1, 6);
  
  useEffect(() => {
    if (!initialProducts) {
      execute();
    }
  }, [initialProducts, execute]); // ‚úÖ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
};
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ProductsGrid

#### **–î–æ:**
```typescript
const handleSearch = async () => {
  // ... –ª–æ–≥–∏–∫–∞
};

useEffect(() => {
  const timeoutId = setTimeout(() => {
    handleSearch();
  }, 500);
  return () => clearTimeout(timeoutId);
}, [searchQuery]); // ‚ùå handleSearch –Ω–µ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω
```

#### **–ü–æ—Å–ª–µ:**
```typescript
const handleSearch = useCallback(async () => {
  // ... –ª–æ–≥–∏–∫–∞
}, [searchQuery, fetchProducts, searchProducts]);

useEffect(() => {
  const timeoutId = setTimeout(() => {
    handleSearch();
  }, 500);
  return () => clearTimeout(timeoutId);
}, [searchQuery, handleSearch, fetchProducts]); // ‚úÖ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚ùå **–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã** - "Maximum update depth exceeded"
- ‚ùå **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤** - 2-3 –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚ùå **–ù–∞—Ä—É—à–µ–Ω–∏–µ Rules of Hooks** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚ùå **–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –º–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–Ω–¥–µ—Ä—ã** - –Ω–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - 1-2 –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚úÖ **–°–æ–±–ª—é–¥–µ–Ω–∏–µ Rules of Hooks** - –Ω–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- ‚úÖ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –±—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤:**
   ```
   üì¶ Using cached data for: cart_get
   üîÑ Fetching fresh data for: products_paginated_1_6
   üîÑ Fetching fresh data for: farms_all
   ```
3. **–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ—à–∏–±–æ–∫:**
   - –ù–µ—Ç "Maximum update depth exceeded"
   - –ù–µ—Ç "Rules of Hooks" –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
   - –ù–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –õ–æ–≥–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```typescript
// –í useApi.ts
console.log('üì¶ Using cached data for:', cacheKey);
console.log('üîÑ Fetching fresh data for:', cacheKey);

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
console.log('FeaturedProducts: –°–æ—Å—Ç–æ—è–Ω–∏–µ:', { loading, error, productsCount: products.length });
console.log('FeaturedProducts: –ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ:', data.data);
```

## üìù –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ö—É–∫–∏:**
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
const { data } = useProductsPaginated(1, 6);

// ‚ùå –ü–ª–æ—Ö–æ
const productsApi = useProducts();
const { data } = productsApi.getPaginated(1, 6);
```

### 2. **–ú–µ–º–æ–∏–∑–∏—Ä—É–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:**
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
const handleClick = useCallback(() => {
  // –ª–æ–≥–∏–∫–∞
}, [dependency]);

// ‚ùå –ü–ª–æ—Ö–æ
const handleClick = () => {
  // –ª–æ–≥–∏–∫–∞
};
```

### 3. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
useEffect(() => {
  // —ç—Ñ—Ñ–µ–∫—Ç
}, [stableDependency]);

// ‚ùå –ü–ª–æ—Ö–æ
useEffect(() => {
  // —ç—Ñ—Ñ–µ–∫—Ç
}, [unstableFunction]);
```

### 4. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –∫—ç—à–∞:**
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
useApi(() => apiCall(), { cacheKey: 'unique_key' });

// ‚ùå –ü–ª–æ—Ö–æ
useApi(() => apiCall()); // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª—é—á –º–æ–∂–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ React Strict Mode
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - lazy loading
4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ error boundaries** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
5. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫—ç—à

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã  
**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** üöÄ –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω–∞  
**–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** üõ°Ô∏è –í—ã—Å–æ–∫–∞—è 