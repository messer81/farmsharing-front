# üöÄ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

## üìÖ –î–∞—Ç–∞: 4 –∞–≤–≥—É—Å—Ç–∞ 2025

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ, –≤—ã–∑—ã–≤–∞—è "Maximum update depth exceeded"
- **–†–µ—à–µ–Ω–∏–µ:** 
  - –£–±—Ä–∞–ª `apiCall` –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π `useCallback` –≤ `useApi`
  - –°–æ–∑–¥–∞–ª —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ö—É–∫–∏: `useProductsPaginated`, `useProductsAll`, `useFarmsAll`
  - –ò—Å–ø—Ä–∞–≤–∏–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `useEffect` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è —Ü–∏–∫–ª–æ–≤

#### 2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è API —Ö—É–∫–æ–≤**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –•—É–∫–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
- **–†–µ—à–µ–Ω–∏–µ:**
  - –°–æ–∑–¥–∞–ª —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ö—É–∫–∏ —Å –º–µ–º–æ–∏–∑–∞—Ü–∏–µ–π
  - –î–æ–±–∞–≤–∏–ª —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –∫—ç—à–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞
  - –ò—Å–ø—Ä–∞–≤–∏–ª –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Ö—É–∫–æ–≤ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

#### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ç–∏–ø–∞**
- **–ü—Ä–æ–±–ª–µ–º–∞:** `Rating` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ª—É—á–∞–ª —Å—Ç—Ä–æ–∫—É –≤–º–µ—Å—Ç–æ —á–∏—Å–ª–∞
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏–ª `parseFloat(farm.rating.toString())` –≤ `FarmProfiles`

#### 4. **–û—á–∏—Å—Ç–∫–∞ –∫–æ–¥–∞**
- –£–±—Ä–∞–ª –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã: `AxiosRequestConfig`, `Product`, `useRef`
- –£–¥–∞–ª–∏–ª –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: `getCacheKey`, `totalProducts`
- –ò—Å–ø—Ä–∞–≤–∏–ª —Ç–∏–ø–∏–∑–∞—Ü–∏—é –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### **useApi.ts**
```typescript
// –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ö—É–∫–∏ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤
export function useProductsPaginated(page: number, limit: number) {
  return useApi(() => apiClient.products.getPaginated(page, limit), { 
    cacheKey: `products_paginated_${page}_${limit}` 
  });
}

// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
const execute = useCallback(async () => {
  // ... –ª–æ–≥–∏–∫–∞
}, [options.onSuccess, options.onError, options.cacheKey]); // –£–±—Ä–∞–ª apiCall
```

#### **ProductsGrid.tsx**
```typescript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ö—É–∫–æ–≤
const { data, loading: apiLoading, error: apiError, execute: fetchProducts } = useProductsPaginated(page, 8);
const { execute: searchProducts } = useProductsSearch(searchQuery);
const { execute: filterByCategory } = useProductsByCategory(selectedCategory);

// –ú–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
const handleSearch = useCallback(async () => {
  // ... –ª–æ–≥–∏–∫–∞
}, [searchQuery, fetchProducts, searchProducts]);
```

#### **API.ts**
```typescript
// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∫–æ—Ä–∑–∏–Ω—ã
export const cartApi = {
  addToCart: async (productId: number, quantity: number = 1) => {
    return apiRequest('/api/cart/add', { method: 'POST', data: { productId, quantity } });
  },
  updateCartItem: async (itemId: number, quantity: number) => {
    return apiRequest(`/api/cart/${itemId}`, { method: 'PUT', data: { quantity } });
  },
  removeFromCart: async (itemId: number) => {
    return apiRequest(`/api/cart/${itemId}`, { method: 'DELETE' });
  },
};
```

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

#### ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
1. **–£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã** - –±–æ–ª—å—à–µ –Ω–µ—Ç "Maximum update depth exceeded"
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã** - —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ö—É–∫–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Ç–∏–ø–∞** - Rating –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. **–û—á–∏—â–µ–Ω –∫–æ–¥** - —É–±—Ä–∞–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏
5. **–£–ª—É—á—à–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

#### üìà **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤** - —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –¥–æ 1-2 –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 5 –º–∏–Ω—É—Ç
- **–°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ö—É–∫–∏** - –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ

### üõ†Ô∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### **–°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ö—É–∫–∏ API:**
- `useProductsPaginated(page, limit)` - –¥–ª—è –ø–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- `useProductsAll()` - –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- `useFarmsAll()` - –¥–ª—è –≤—Å–µ—Ö —Ñ–µ—Ä–º
- `useCartGet()` - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã

#### **–ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ö—É–∫–∏** –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
2. **–ú–µ–º–æ–∏–∑–∏—Ä—É–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏** —Å `useCallback`
3. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** –≤ `useEffect`
4. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –∫—ç—à–∞** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞

### üîç –û—Ç–ª–∞–¥–∫–∞

#### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
node server.cjs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
# - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
# - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
# - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ—à–∏–±–æ–∫ "Maximum update depth exceeded"
```

#### **–õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:**
- `üì¶ Using cached data for:` - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- `üîÑ Fetching fresh data for:` - –Ω–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- `FeaturedProducts: –°–æ—Å—Ç–æ—è–Ω–∏–µ:` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ React Strict Mode
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - lazy loading –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ error boundaries** - –¥–ª—è –ª—É—á—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã  
**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** üöÄ –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω–∞  
**–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** üõ°Ô∏è –í—ã—Å–æ–∫–∞—è 